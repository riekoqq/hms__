{% extends "layout/base.html" %}

{% block heading_action %}{% endblock heading_action %}


{% block content %}
    {% if user.is_staff %}
    
    <div class="row">
        <div class="col-sm-6 col-md-3">
            <div class="card card-stats card-round">
            <div class="card-body">
                <div class="row align-items-center">
                <div class="col-icon">
                    <div
                    class="icon-big text-center icon-primary bubble-shadow-small"
                    >
                    <i class="fas fa-users"></i>
                    </div>
                </div>
                <div class="col col-stats ms-3 ms-sm-0">
                    <div class="numbers">
                    <p class="card-category">No. of Hospitals</p>
                    <h4 class="card-title">{{ number_of_hospitals }}</h4>
                    </div>
                </div>
                </div>
            </div>
            </div>
        </div>
        <div class="col-sm-6 col-md-3">
            <div class="card card-stats card-round">
            <div class="card-body">
                <div class="row align-items-center">
                <div class="col-icon">
                    <div
                    class="icon-big text-center icon-info bubble-shadow-small"
                    >
                    <i class="fas fa-user-check"></i>
                    </div>
                </div>
                <div class="col col-stats ms-3 ms-sm-0">
                    <div class="numbers">
                    <p class="card-category">No. of Patients</p>
                    <h4 class="card-title">{{ number_of_patients }}</h4>
                    </div>
                </div>
                </div>
            </div>
            </div>
        </div>
        <div class="col-sm-6 col-md-3">
            <div class="card card-stats card-round">
            <div class="card-body">
                <div class="row align-items-center">
                <div class="col-icon">
                    <div
                    class="icon-big text-center icon-success bubble-shadow-small"
                    >
                    <i class="fas fa-luggage-cart"></i>
                    </div>
                </div>
                <div class="col col-stats ms-3 ms-sm-0">
                    <div class="numbers">
                    <p class="card-category">No. Staffs</p>
                    <h4 class="card-title">{{ number_of_staffs }}</h4>
                    </div>
                </div>
                </div>
            </div>
            </div>
        </div>
        </div>  
    
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Hospitals List</div>
                    </div>
                    <div class="card-body">
                        <div class="card-sub">
                            This is the basic table view of hospitals:
                        </div>
                        <table class="table mt-3">
                            <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Name</th>
                                    <th scope="col">Location</th>
                                    <th scope="col">Established</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for hospital in hospital_page %}
                                <tr>
                                    <td>{{ forloop.counter }}</td>
                                    <td>{{ hospital.name }}</td>
                                    <td>{{ hospital.location }}</td>
                                    <td>{{ hospital.created_at }}</td>
                                </tr>
                                {% empty %}
                                <tr>
                                    <td colspan="4">No hospitals found.</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                
                        <!-- Pagination for Hospitals -->
                        <nav aria-label="Hospital pagination">
                            <ul class="pagination">
                                {% if hospital_page.has_previous %}
                                    <li class="page-item">
                                        <a class="page-link" href="?hospital_page={{ hospital_page.previous_page_number }}" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                {% endif %}
                                {% for num in hospital_page.paginator.page_range %}
                                    <li class="page-item {% if hospital_page.number == num %}active{% endif %}">
                                        <a class="page-link" href="?hospital_page={{ num }}">{{ num }}</a>
                                    </li>
                                {% endfor %}
                                {% if hospital_page.has_next %}
                                    <li class="page-item">
                                        <a class="page-link" href="?hospital_page={{ hospital_page.next_page_number }}" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                {% endif %}
                            </ul>
                        </nav>
                    </div>
                </div>
                
                <div class="card mt-5">
                    <div class="card-header">
                        <div class="card-title">Patients List</div>
                    </div>
                    <div class="card-body">
                        <div class="card-sub">
                            This is the basic table view of patients:
                        </div>
                        <table class="table mt-3">
                            <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">First Name</th>
                                    <th scope="col">Last Name</th>
                                    <th scope="col">Date of Birth</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for patient in patient_page %}
                                <tr>
                                    <td>{{ forloop.counter }}</td>
                                    <td>{{ patient.first_name }}</td>
                                    <td>{{ patient.last_name }}</td>
                                    <td>{{ patient.birthdate }}</td>
                                </tr>
                                {% empty %}
                                <tr>
                                    <td colspan="4">No patients found.</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                
                        <!-- Pagination for Patients -->
                        <nav aria-label="Patient pagination">
                            <ul class="pagination">
                                {% if patient_page.has_previous %}
                                    <li class="page-item">
                                        <a class="page-link" href="?patient_page={{ patient_page.previous_page_number }}" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                {% endif %}
                                {% for num in patient_page.paginator.page_range %}
                                    <li class="page-item {% if patient_page.number == num %}active{% endif %}">
                                        <a class="page-link" href="?patient_page={{ num }}">{{ num }}</a>
                                    </li>
                                {% endfor %}
                                {% if patient_page.has_next %}
                                    <li class="page-item">
                                        <a class="page-link" href="?patient_page={{ patient_page.next_page_number }}" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                {% endif %}
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
    </div>
    {% else %}

    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body pb-0">
                    <div class="row align-items-center">
                        <div class="col-md-3">
                            <div class="text-center border-end">
                                <img src="https://www.freepik.com/premium-vector/user-profile-icon-flat-style-member-avatar-vector-illustration-isolated-background-human-permission-sign-business-concept_44276367.htm" class="img-fluid avatar-xxl rounded-circle" alt="">
                                <h4 class="text-primary font-size-20 mt-3 mb-2">{{ patient.first_name }} {{ patient.last_name }}</h4>
                            </div>
                        </div><!-- end col -->
                        <div class="col-md-9">
                            <div class="ms-3">
                                <div>
                                    <h4 class="card-title mb-2">Information</h4>
                                </div>
                                <div class="row my-4">
                                    <div class="col-md-12">
                                        <div>
                                            <p class="text-muted mb-2 fw-medium"><i class="mdi mdi-email-outline me-2"></i>Gender {{ patient.gender }}
                                            </p>
                                            <p class="text-muted fw-medium mb-0"><i class="mdi mdi-phone-in-talk-outline me-2"></i>Birthdate {{ patient.birthdate }}
                                            </p>
                                            <p class="text-muted fw-medium mb-0"><i class="mdi mdi-phone-in-talk-outline me-2"></i>Status {{ patient.status }}
                                            </p>
                                        </div>
                                    </div><!-- end col -->
                                </div><!-- end row -->
                            </div>
                        </div><!-- end col -->
                    </div><!-- end row -->
                </div><!-- end card body -->
            </div><!-- end card -->

            <table class="table mt-3">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Diagnosis</th>
                        <th scope="col">Treatment</th>
                        <th scope="col">Medication</th>
                        <th scope="col">Date of Visit</th>
                    </tr>
                </thead>
                <tbody>
                {% for record in medical_records %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ record.diagnosis }}</td>
                        <td>{{ record.treatment }}</td>
                        <td>{{ record.medications }}</td>
                        <td>{{ record.date_of_visit }}</td>

                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div><!-- end col -->
    </div>
</div>
    
    {% endif %}
{% endblock content %}